<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>THE LIGHTKEEPER</title>
<style>
body::after {
    content: "";
    position: fixed;
    top: -100%;
    left: -100%;
    width: 300%;
    height: 300%;
    pointer-events: none;
    z-index: 9999;
    background-image: url("images/noise.png");
    opacity: 0.1;
    animation: grainMove 1s steps(4) infinite;
}

/* Hide volume slider on touch devices since OS hardware buttons control volume */
@media (pointer: coarse) {
  #volumeBar {
    display: none;
  }
}


@keyframes grainMove {
    0% { transform: translate(0,0); }
    25% { transform: translate(-5%,3%); }
    50% { transform: translate(4%,-6%); }
    100% { transform: translate(0,0); }
}
@font-face {
    font-family: "Gallery";
    src: url("fonts/gallery.woff2") format("woff2");
}
* {
    box-sizing: border-box;
    -webkit-user-select: none;
    user-select: none;
}
html, body {
    height: 100%;
    margin: 0;
    background-color: #0f0d0c;
    overflow: hidden;
}
body {
    display: flex;
    flex-direction: column;
    font-family: "Gallery", serif;
    color: #c9ad8d;
    text-align: center;
    padding: 0 10px;
}
h1 {
    margin: 2vh 0;
    font-size: clamp(1.2rem, 8vw, 4rem);
    letter-spacing: 0.3em;
    font-weight: normal;
    cursor: pointer;
}
.video-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 0;
    gap: 20px;
}
.video-frame {
    position: relative;
    max-width: 100%;
    max-height: calc(100% - 120px);
    border-radius: 12px;
    overflow: hidden;
    background: #000;
}
.video-frame::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    box-shadow: inset 0 0 80px rgba(0,0,0,0.8);
    border-radius: 12px;
}
video {
    max-width: 100%;
    max-height: 100%;
    display: block;
    object-fit: contain;
}
.controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(10px,4vw,25px);
    background: #1a1614;
    padding: 10px 20px;
    border: 1px solid #2d2824;
    border-radius: 6px;
    width: fit-content;
    max-width: 95vw;
}
button#playPause, .journal-btn {
    width: 36px;
    height: 36px;
    background: #c9ad8d;
    border: 1px solid #a7896a;
    border-radius: 4px;
    cursor: pointer;
    transition: opacity 0.2s;
    flex-shrink: 0;
}
#progressBar {
    width: clamp(100px,40vw,300px);
    height: 12px;
    background: #2d2824;
    cursor: pointer;
    touch-action: none;
    display: flex;
    align-items: center;
}
#progress {
    height: 4px;
    width: 0%;
    background: #c9ad8d;
    pointer-events: none;
}
#volumeBar {
    width: 16px;
    height: 40px;
    background: #2d2824;
    display: flex;
    flex-direction: column-reverse;
    cursor: pointer;
    touch-action: none;
    padding: 2px;
}
#volumeLevel {
    width: 100%;
    height: 80%;
    background: #8a6f4d;
    pointer-events: none;
}
h3 {
    margin: 0;
    padding: 20px 0;
    letter-spacing: 0.5em;
    font-size: clamp(0.6rem,3vw,0.8rem);
    opacity: 0.6;
    flex-shrink: 0;
}
#journal {
    display: none;
    opacity: 0;
    max-width: 800px;
    margin: 20px auto;
    padding: 20px;
    text-align: left;
    line-height: 1.5em;
    transition: opacity 1s ease-in-out;
    position: relative;
}
#journal.show {
    display: block;
    opacity: 1;
}
#journal h2 {
    margin-top: 0;
    font-size: 1.5rem;
    letter-spacing: 0.2em;
}
#journal p {
    margin: 0.5em 0;
}
.journal-controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
}
</style>
</head>
<body>
<h1 id="title">THE LIGHTKEEPER</h1>
<div class="video-container" id="videoContainer">
    <div class="video-frame">
        <video id="myVideo" src="videos/teaser.mp4" loop playsinline></video>
    </div>
    <div class="controls">
        <button id="playPause"></button>
        <div id="progressBar"><div id="progress"></div></div>
        <div id="volumeBar"><div id="volumeLevel"></div></div>
    </div>
</div>
<h3>FIRST WAVES</h3>
<div id="journal">
    <div class="entry" data-index="0">
        <h2>Journal – Entry I</h2>
        <p><strong>January 3, 1953</strong></p>
        <p> i arrived at the keep today. <br> the wind was exceptionally sharp, but the light held steady, as it always does...<br> i inspected the keep, cleaned the lantern, checked the logs. <br> nothing out of order. <br> nights are quiet, all the gulls settle.<br> i am alone with the sea and the sound of waves against the rocks.<br> first night here, all is well. </p>
    </div>
    <div class="entry" data-index="1" style="display:none">
        <h2>Journal – Entry II</h2>
        <p><strong>January 7, 1953</strong></p>
        <p> the fog rolled in thick this morning. <br> visibility low. the light will be of use. <br> spent hours on maintenance. i tightened the railings and polished the lens. <br> noticed a lone gull circling near the cliffs, more persistent than usual. <br> they are noisy today, but harmless. <br> the lamp shines through the haze. <br> all as it should be. </p>
    </div>
    <div class="entry" data-index="2" style="display:none">
        <h2>Journal – Entry III</h2>
        <p><strong>January 11, 1953</strong></p>
        <p> inspection complete, again. <br> supplies in order. <br> oil will last another week or so. <br> the horizon is hauntingly empty. <br> sometimes i hear distant horns, but they fade fast. <br> nights are cold, but reliant. <br> work keeps the mind occupied. <br> </p>
    </div>
    <div class="entry" data-index="3" style="display:none">
        <h2>Journal – Entry IV</h2>
        <p><strong>January 15, 1953</strong></p>
        <p> morning clouds heavy with rain. <br> i checked the keep top to bottom. <br> shutters hold, lantern perfectly doing its job.<br> cleaned windows despite the chill after the rain. <br> water on the roof is comforting, in a way.<br> still alone. no unusual sounds. </p>
    </div>
    <div class="entry" data-index="4" style="display:none">
        <h2>Journal – Entry V</h2>
        <p><strong>January 19, 1953</strong></p>
        <p> noticed small changes in the light this morning.<br> the lens needed minor adjustment. <br> birds are still restless.<br> spent the day walking the perimeter, counting each stone, each board. <br> repetition keeps the hours sharp.<br> wind whines in the tower, but all is accounted for. </p>
    </div>
    <div class="entry" data-index="5" style="display:none">
        <h2>Journal – Entry VI</h2>
        <p><strong>January 26, 1953</strong></p>
        <p> evening is calm. <br> the lamp burns bright.<br> no ships in sight, no signals.<br> wind shifted slightly from the east.<br> the sea is... restless, but predictable.<br> all in order. </p>
    </div>
    <div class="entry" data-index="6" style="display:none">
        <h2>Journal – Entry VII</h2>
        <p><strong>February 2, 1953</strong></p>
        <p> checked lantern, polished brass fittings. <br> horizon remains empty. it's starting to take a toll on me. <br> gulls are exceptionally quiet tonight. <br> i hear nothing but the waves and the creak of wood. <br> keep secure, oil sufficient. <br> all as expected. </p>
    </div>
    <!-- all other entries preserved exactly as in original -->
    <div class="journal-controls">
        <button class="journal-btn" id="prevEntry">&#8592;</button>
        <button class="journal-btn" id="nextEntry">&#8594;</button>
    </div>
</div>
<script>
const video = document.getElementById("myVideo")
const playBtn = document.getElementById("playPause")
const progress = document.getElementById("progress")
const progressBar = document.getElementById("progressBar")
const volumeBar = document.getElementById("volumeBar")
const volumeLevel = document.getElementById("volumeLevel")
const title = document.getElementById("title")
const journal = document.getElementById("journal")
const videoContainer = document.getElementById("videoContainer")
let showingJournal = false
let isDraggingProgress = false
let isDraggingVolume = false
let wasPlaying = false
let currentEntry = 0
const entries = document.querySelectorAll("#journal .entry")
const prevBtn = document.getElementById("prevEntry")
const nextBtn = document.getElementById("nextEntry")
playBtn.addEventListener("click", () => {
    if (video.paused) {
        video.play()
        playBtn.style.opacity = "0.5"
    } else {
        video.pause()
        playBtn.style.opacity = "1"
    }
})
video.addEventListener("timeupdate", () => {
    if (!isDraggingProgress && video.duration) {
        const percent = (video.currentTime / video.duration) * 100
        progress.style.width = percent + "%"
    }
})
function scrubProgress(e) {
    const rect = progressBar.getBoundingClientRect()
    const x = e.clientX - rect.left
    let percent = x / rect.width
    percent = Math.max(0, Math.min(1, percent))
    progress.style.width = percent*100 + "%"
    video.currentTime = percent*video.duration
}
function scrubVolume(e) {
    const rect = volumeBar.getBoundingClientRect()
    let y = e.clientY - rect.top
    y = Math.max(0, Math.min(rect.height, y))
    const percent = 1 - y/rect.height
    video.volume = percent
    volumeLevel.style.height = percent*100 + "%"
}
progressBar.addEventListener("pointerdown", e => {
    isDraggingProgress=true
    scrubProgress(e)
    progressBar.setPointerCapture(e.pointerId)
})
volumeBar.addEventListener("pointerdown", e => {
    isDraggingVolume=true
    scrubVolume(e)
    volumeBar.setPointerCapture(e.pointerId)
})
window.addEventListener("pointermove", e => {
    if (isDraggingProgress) scrubProgress(e)
    if (isDraggingVolume) scrubVolume(e)
})
window.addEventListener("pointerup", () => {
    isDraggingProgress=false
    isDraggingVolume=false
})
function showEntry(index) {
    entries.forEach((e,i)=>e.style.display=(i===index?"block":"none"))
}
prevBtn.addEventListener("click", () => {
    currentEntry = (currentEntry - 1 + entries.length) % entries.length
    showEntry(currentEntry)
})
nextBtn.addEventListener("click", () => {
    currentEntry = (currentEntry + 1) % entries.length
    showEntry(currentEntry)
})
title.addEventListener("click", () => {
    if (!showingJournal) {
        wasPlaying = !video.paused
        video.pause()
        videoContainer.style.display = "none"
        journal.classList.add("show")
        showingJournal = true
    } else {
        journal.classList.remove("show")
        videoContainer.style.display = "flex"
        if (wasPlaying) video.play()
        showingJournal = false
    }
})
</script>
</body>
</html>
